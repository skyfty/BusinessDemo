
<style>  
     .phone-input.invalid {  
        border-color: red !important;  
    }  
    .id-number-input.invalid {  
        border-color: red !important;  
    }  
</style>

<form id="add-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="">
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Proposer_name')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-proposer_name" data-rule="required" class="form-control" name="row[proposer_name]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Content')}:</label>
        <div class="col-xs-12 col-sm-8">
            <textarea id="c-content" data-rule="required" class="form-control editor" rows="5" name="row[content]" cols="50"></textarea>
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('English_name')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-english_name" class="form-control" name="row[english_name]" type="text" value="">
        </div>
    </div>
    <!-- <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('User_number')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-user_number" class="form-control" name="row[user_number]" type="text" value="">
        </div>
    </div> -->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Applicant_type')}:</label>
        <!-- 申请人类型 -->
        <div class="col-xs-12 col-sm-8">
            <select class="form-control" name="row[applicant_type]">
                <option value="大专院校">大专院校
                </option>
                <option value="科研单位" >科研单位
                </option>
                <option value="工矿企业" >工矿企业
                </option>
                <option value="事业单位" >事业单位
                </option>
                <option value="个人" >个人
                </option>
            </select>
            <!-- <input id="c-applicant_type" class="form-control" name="row[applicant_type]" type="text" value=""> -->
        </div>
    </div>
  
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Certificate_type')}:</label>
        <div class="col-xs-12 col-sm-8">
            <select  class="form-control" name="row[certificate_type]" id="tt">
                <option value="身份证">身份证
                </option>
                <option value="护照" >护照
                </option>
            </select>
           
        </div>
    </div>
    <!-- id="c-id_number" -->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Id_number')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input  class="form-control id-number-input" name="row[id_number]" type="text"   id="ii" value="" maxlength="16">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Nationality_region')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-nationality_region" class="form-control" name="row[nationality_region]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Place_residence')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-place_residence" class="form-control" name="row[place_residence]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Provience')}:</label>
        <!-- 地区 -->
        <div class="col-xs-12 col-sm-8">
            <!-- <input id="city-select" data-toggle="city-picker" class="form-control" name="registeraddress" type="text" value=""> -->
            <input id="c-provience"  data-toggle="city-picker" class="form-control" name="row[provience]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Street')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-street" class="form-control" name="row[street]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Postal_code')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-postal_code" class="form-control" name="row[postal_code]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Email')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-email" class="form-control" name="row[email]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Applicant_telephone')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-applicant_telephone" class="form-control" name="row[applicant_telephone]" type="text" value="" maxlength="11">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Fee_reduction_request')}:</label>
        <div class="col-xs-12 col-sm-8">
            <select class="form-control" name="fee_reduction_request">
                <option value="请求费减且已完成费减资格备案"
                    >请求费减且已完成费减资格备案
                </option>
                <option value="否" >否
                </option>

            </select>
            <!-- <input id="c-fee_reduction_request" class="form-control" name="row[fee_reduction_request]" type="text" value=""> -->
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Pre_examination_record')}:</label>
        <div class="col-xs-12 col-sm-8">
            <select class="form-control" name="pre_examination_record">
                <option value="是" >是
                </option>
                <option value="否" >否
                </option>

            </select>
            <!-- <input id="c-pre_examination_record" class="form-control" name="row[pre_examination_record]" type="text" value=""> -->
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">总委备案:</label>
        <div class="col-xs-12 col-sm-8">
            <select id="aa" class="form-control" name="row[general_committee_record]">
                <option value="是">是
                </option>
                <option value="否" >否
                </option>
            </select>
            <!-- <input id="c-general_committee_record" class="form-control" name="row[general_committee_record]" type="text" value=""> -->
        </div>
    </div>
    <div class="form-group" id="bb">
        <label class="control-label col-xs-12 col-sm-2">总委备案号:</label>
        <div class="col-xs-12 col-sm-8">
          
            <input id="c-general_committee_number" class="form-control" name="row[general_committee_number]" type="text" value="">
        </div>
    </div>
  
    <div class="form-group">
        <label for="c-attachment" class="control-label col-xs-12 col-sm-2">{:__('Attachment')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="input-group">
                <input id="c-attachment" data-rule="" class="form-control" size="50" name="row[attachment]" type="text" value="">
                <div class="input-group-addon no-border no-padding">
                    <span><button type="button" id="faupload-attachment" class="btn btn-danger faupload" data-input-id="c-attachment" data-mimetype="image/gif,image/jpeg,image/png,image/jpg,image/bmp" data-multiple="false" data-preview-id="p-attachment"><i class="fa fa-upload"></i> 上传</button></span>
                    <span><button type="button" id="fachoose-attachment" class="btn btn-primary fachoose" data-input-id="c-attachment" data-mimetype="image/*" data-multiple="false"><i class="fa fa-list"></i> 选择</button></span>
                </div>
                <span class="msg-box n-right" for="c-attachment"></span>
            </div>
            <ul class="row list-inline faupload-preview" id="p-attachment"></ul>
        </div>
    </div>
    <div class="form-group layer-footer">
        <label class="control-label col-xs-12 col-sm-2"></label>
        <div class="col-xs-12 col-sm-8">
            <button type="submit" class="btn btn-primary btn-embossed disabled">{:__('OK')}</button>
        </div>
    </div>
</form>


<script>


document.addEventListener("DOMContentLoaded", function () {
        var selectGeneralCommittee = document.getElementById("aa");
        var generalCommitteeNumberRow = document.getElementById("bb");

        // 根据初始值确定是否显示总委备案号
        if (selectGeneralCommittee.value === "是") {
            generalCommitteeNumberRow.style.display = "block";
        } else {
            generalCommitteeNumberRow.style.display = "none";
        }

        // 添加change事件监听器
        selectGeneralCommittee.addEventListener("change", function () {
            if (selectGeneralCommittee.value === "是") {
                generalCommitteeNumberRow.style.display = "block";
            } else {
                generalCommitteeNumberRow.style.display = "none";
            }
        });


        var certificateType = document.getElementById('tt');  
        var idNumberInput = document.getElementById('ii');  
          
        // 根据证件类型设置最大长度  
        certificateType.addEventListener('change', function() {  
            var maxLength = this.value === '身份证' ? 16 : 9;  
            idNumberInput.setAttribute('maxlength', maxLength);  
            // 清除可能存在的invalid类  
            idNumberInput.classList.remove('invalid');  
        });  
  
        // 检查证件号码长度并设置边框颜色  
        idNumberInput.addEventListener('input', function() {  
            var value = this.value.trim();  
            var maxLength = certificateType.value === '身份证' ? 16 : 9;  
            if (value.length !== maxLength) {  
                this.classList.add('invalid');  
            } else {  
                this.classList.remove('invalid');  
            }  
        });  
  
        // 初始设置  
        certificateType.dispatchEvent(new Event('change'));  

            });

</script>
